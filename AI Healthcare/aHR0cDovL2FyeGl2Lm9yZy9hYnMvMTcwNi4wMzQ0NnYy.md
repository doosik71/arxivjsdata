# DEEP EHR: 전자 건강 기록 (EHR) 분석을 위한 딥러닝 기술의 최근 발전 동향 조사

Benjamin Shickel, Patrick J. Tighe, Azra Bihorac, and Parisa Rashidi

## 🧩 Problem to Solve

지난 10년간 전자 건강 기록(EHR)에 저장된 디지털 정보의 양이 폭발적으로 증가했습니다. EHR은 주로 환자 정보 보관 및 청구와 같은 행정적 의료 업무를 위해 설계되었지만, 많은 연구자들이 이 기록들을 다양한 임상 정보학 애플리케이션에 2차적으로 활용하고 있습니다. 같은 기간 동안 딥러닝 분야에서 광범위한 발전이 있었으나, EHR 데이터에 딥러닝을 적용하는 현재 연구 동향을 체계적으로 조사하고, 딥러닝 기술과 프레임워크가 정보 추출, 표현 학습, 결과 예측, 표현형 분석, 개인 식별 정보 제거 등 다양한 임상 애플리케이션에 어떻게 적용되는지 분석하며, 관련 한계점과 향후 연구 방향을 제시하는 것이 필요합니다. 특히, 데이터의 이질성, 모델 해석 가능성, 보편적인 벤치마크 부재 등의 문제가 존재합니다.

## ✨ Key Contributions

- **EHR 데이터 기반 딥러닝 적용 연구 조사**: EHR 데이터를 활용한 임상 작업에 딥러닝을 적용한 최신 연구를 종합적으로 조사합니다.
- **다양한 딥러닝 기술 및 임상 애플리케이션 분류**: 정보 추출, 표현 학습, 결과 예측, 표현형 분석, 개인 식별 정보 제거 등 주요 임상 애플리케이션에 적용된 딥러닝 기술과 프레임워크를 유형별로 분류합니다.
- **현재 연구의 한계점 식별**: 모델 해석 가능성, 데이터 이질성, 보편적 벤치마크 부족 등 현재 연구가 직면한 여러 제한 사항들을 명확히 제시합니다.
- **분야 현황 요약 및 미래 연구 방향 제시**: 딥러닝 기반 EHR 연구의 현재 상태를 요약하고, 향후 연구를 위한 유망한 방향을 제안합니다.
- **EHR 데이터 특화된 딥러닝 기술에 집중**: 광범위한 건강 정보학 애플리케이션(예: 유전체 분석, 생체 의료 영상 분석)을 다루는 다른 조사 논문과 달리, EHR 데이터에 특화된 딥러닝 기술에 초점을 맞춥니다.

## 📎 Related Works

- **전통적인 머신러닝 방법**: 로지스틱 회귀, 서포트 벡터 머신(SVM), 랜덤 포레스트와 같은 전통적인 통계 및 머신러닝 기법이 EHR 데이터 분석에 사용되었습니다.
- **선행 딥러닝 연구**: 딥러닝은 다양한 분야에서 깊은 계층적 특징 구성과 장거리 의존성 포착을 통해 뛰어난 성능을 보여왔습니다.
- **EHR 관련 딥러닝 프로젝트**:
  - **DeepPatient**: 다중 결과 예측을 위해 오토인코더를 활용 (Miotto et al. [14])
  - **Deepr**: 병원 재입원 예측을 위한 CNN 사용 (Nguyen et al. [19])
  - **DeepCare**: EHR 개념 표현 및 질병 진행 모델링을 위한 LSTM 사용 (Pham et al. [20])
  - **Doctor AI**: 심부전 예측 및 임상 이벤트 예측을 위한 GRU 네트워크 사용 (Choi et al. [21])
  - **Med2Vec**: EHR 개념 표현 학습 (Choi et al. [22])
  - **eNRBM**: 자살 위험 계층화를 위한 제한된 볼츠만 머신 (Tran et al. [23])
- **공개 데이터셋**: MIMIC (Medical Information Mart for Intensive Care) 및 i2b2 (Informatics for Integrating Biology and the Bedside)와 같은 공개된 임상 데이터베이스가 여러 연구에서 활용되었습니다.
- **NLP 기술**: skip-gram (word2vec) [54]과 같은 자연어 처리(NLP) 기술이 의료 코드의 분산 표현 학습에 영감을 주었습니다.
- **선행 서베이**: 유전체 분석부터 생체 의료 영상 분석에 이르는 광범위한 건강 정보학 애플리케이션에서 딥러닝을 검토한 다른 서베이 논문 ([24])이 존재하나, 본 논문은 EHR 데이터에만 초점을 맞춥니다.

## 🛠️ Methodology

본 논문은 EHR 데이터 분석을 위한 딥러닝 기술에 대한 조사(survey) 연구입니다. 연구 방법론은 다음과 같습니다.

1. **검색 전략 및 선택 기준**:
   - Google Scholar에서 2017년 8월까지 출판된 연구들을 검색했습니다.
   - 검색어는 "electronic health records" 또는 "electronic medical records" 또는 "EHR" 또는 "EMR"과 함께 "deep learning" 또는 특정 딥러닝 기술 이름(예: recurrent neural network, RNN, LSTM, GRU, CNN, Autoencoder, RBM, DBN, Skip-gram)을 조합했습니다.
   - 초기 검색 결과가 비교적 적었기 때문에, 모든 논문을 수동으로 검토하여 가장 중요하고 전형적인 Deep EHR 출판물을 선정했습니다.
2. **EHR 시스템 개요 (Section II)**:
   - EHR 시스템의 증가와 기능적 다양성(기본 EHR, 임상 노트를 포함한 EHR, 포괄적 시스템)을 설명합니다.
   - EHR 데이터의 이질적인 특성(숫자, 날짜-시간, 범주형 값, 자연어 자유 텍스트, 시계열 데이터)과 주요 분류 스키마(ICD, CPT, LOINC, RxNorm)를 소개합니다.
3. **머신러닝 개요 (Section III)**:
   - 지도 학습과 비지도 학습의 개념을 설명하고, 특징 표현의 중요성을 언급합니다.
4. **딥러닝 개요 (Section IV)**:
   - 딥러닝의 핵심 아이디어인 '표현 학습'을 강조하며, 인공 신경망(ANN)의 기본 구조와 가중치 최적화(손실 함수, 역전파, 정규화)를 설명합니다.
   - 주요 딥러닝 아키텍처(MLP, CNN, RNN - LSTM/GRU, Autoencoder - DAE/SAE/VAE, Restricted Boltzmann Machine - RBM/DBN)를 소개하고 각 모델의 핵심 동작 방식을 수학식과 함께 제시합니다. (예: ANN 손실 함수 $E(\theta,D) = - \sum_{i=0}^{D} [\log P(Y=y_{i}|x_{i}, \theta)] + \lambda ||\theta||_{p}$)
5. **Deep EHR 학습 애플리케이션 (Section V)**:
   - 선정된 논문들을 기반으로 Deep EHR 학습 애플리케이션을 다음 5가지 주요 범주로 분류합니다:
     - **정보 추출 (Information Extraction, IE)**: 임상 노트에서 구조화된 의료 개념, 시간 정보, 관계, 약어 확장 등을 추출하는 작업.
     - **EHR 표현 학습 (EHR Representation Learning)**: 희소한 의료 코드를 저차원 벡터 공간으로 투영하여 개념 및 환자 표현을 학습하는 작업.
     - **결과 예측 (Outcome Prediction)**: 정적 또는 시간 기반의 환자 결과 예측.
     - **계산 표현형 분석 (Computational Phenotyping)**: 데이터 기반으로 새로운 표현형을 발견하거나 기존 표현형 정의를 개선하는 작업.
     - **임상 데이터 개인 식별 정보 제거 (Clinical Data De-identification)**: 임상 텍스트에서 민감한 개인 식별 정보를 자동으로 제거하는 작업.
   - 각 범주 내에서 세부 하위 작업과 적용된 딥러닝 모델, 관련 연구들을 설명합니다.
6. **해석 가능성 (Interpretability, Section VI)**:
   - 딥러닝 모델의 "블랙박스" 문제와 임상 영역에서 해석 가능성의 중요성을 논의합니다.
   - 모델 해석 가능성을 높이기 위한 다양한 시도들(최대 활성화 분석, 제약 조건 부여, 정성적 클러스터링, 모방 학습)을 소개합니다.
7. **논의 및 미래 방향 (Section VII)**:
   - 현재 연구 동향을 이미지 및 NLP 분야의 발전과 비교 분석하며, EHR 데이터의 이질성 문제를 강조합니다.
   - 향후 연구 방향으로 모든 유형의 환자 데이터를 활용하는 통합 표현 학습, 비정기적 측정값 처리, 임상 텍스트 활용 증대, 환자 개인 식별 정보 제거 기술 발전, 보편적 벤치마크 확립, 모델 해석 가능성 향상 등을 제시합니다.

## 📊 Results

본 서베이 논문은 EHR 데이터 분석에 딥러닝 기술을 적용한 다양한 연구 결과를 종합하여 다음과 같이 요약합니다.

- **정보 추출 (Information Extraction, IE)**:

  - 단일 개념 추출, 시간적 이벤트 추출, 관계 추출, 약어 확장 등에서 순환 신경망(RNN) 기반 모델(LSTM, GRU, Bi-LSTM) 및 CNN이 전통적인 조건부 무작위 필드(CRF)와 같은 기준 모델보다 훨씬 뛰어난 성능을 보였습니다. 특히 약물 투여량, 질병 심각도와 같은 미묘한 속성 감지에서 강점을 나타냈습니다.
  - 중국 임상 텍스트의 개체명 인식(NER)에서도 CNN과 사전 학습된 워드 임베딩이 CRF 기준선을 개선했습니다.

- **EHR 표현 학습 (EHR Representation Learning)**:

  - **개념 표현**: 제한된 볼츠만 머신(RBM), skip-gram, 오토인코더(AE)와 같은 딥 비지도 학습 기법이 의료 개념(진단, 약물 등) 간의 잠재적 유사성을 포착하는 벡터 표현을 성공적으로 도출했습니다. t-SNE [18], [19], [23], 워드 클라우드 [20], 유사도 히트맵 [40] 등을 통해 정성적으로 평가되었습니다.
  - **환자 표현**: skip-gram, RNN(GRU), CNN, AE와 같은 기법이 환자 데이터를 고정 크기 벡터로 압축하여 표현했으며, 이를 보조 분류 작업(예: 심부전 예측, 재입원 예측)에 활용했을 때 전통적인 방식보다 더 강력한 예측력을 보였습니다.

- **결과 예측 (Outcome Prediction)**:

  - **정적 결과 예측**: MLP, CNN, RBM, DBN, AE 등 다양한 딥러닝 모델이 심부전, 고혈압, 감염, 골다공증, 자살 위험 계층화와 같은 정적 결과를 예측하는 데 있어 원본 특징이나 전통적인 모델보다 우수한 성능을 나타냈습니다. 임상 노트에서 추출된 정보를 활용한 연구에서도 딥러닝이 높은 F1 점수를 달성했습니다.
  - **시간적 결과 예측**: LSTM, GRU, GRU-D (결측치 처리 개선), CNN과 같은 모델이 심부전 발병, 만성 폐쇄성 폐질환(COPD) 발병, 당뇨 및 정신 건강 질병 진행 모델링, 수술 후 합병증 예측, 재입원 예측 등 시간적 종속성이 중요한 예측 작업에서 기준선 모델을 능가했습니다. 특히 GRU-D는 결측치 처리에서 AUC 향상을 보였습니다.

- **계산 표현형 분석 (Computational Phenotyping)**:

  - **새로운 표현형 발견**: 오토인코더(DAE)는 환자 기록에서 잠재 구조를 발견하고 표현형을 계층화하는 데 효과적이었으며, 특히 결측 데이터에 강건함을 보였습니다 (t-SNE 시각화로 명확한 클러스터링 관찰). CNN 모델도 우수한 표현형 및 분류 성능을 제공했습니다.
  - **기존 정의 개선**: LSTM 네트워크가 다중 레이블 분류 문제로 접근하여 기존 질병의 표현형을 예측하는 데 향상된 성능을 보여주었으며, MLP와 결합된 앙상블 모델이 최상의 성능을 달성했습니다. 라플라시안 정규화와 점진적 훈련 절차를 도입하여 희귀 질병에도 유용함을 보였습니다.

- **임상 데이터 개인 식별 정보 제거 (De-identification)**:
  - Bi-LSTM 및 워드 임베딩을 사용한 RNN 아키텍처가 임상 텍스트에서 개인 식별 정보(PHI)를 식별하고 제거하는 데 있어 전통적인 CRF 기반 모델보다 뛰어난 F1 점수를 달성하며 최첨단 성능을 입증했습니다.

**공통적인 평가 지표**:

- 대부분의 분류 및 예측 작업에서는 AUC, 정확도(Accuracy), 정밀도(Precision), 재현율(Recall), F1 점수가 주로 사용되었습니다.
- 시간적 예측 및 개념/환자 표현 학습에서는 precision@k, recall@k와 같은 지표도 활용되었습니다.
- 정성적 평가로는 t-SNE [19], [23], [49], [50]를 통한 클러스터 시각화 또는 히트맵 클러스터 [40]가 사용되었습니다.

**한계점**:

- 대부분의 연구가 기관별 사설 데이터셋을 사용하고 있어, 결과의 직접적인 비교 및 보편적인 벤치마크 확립이 어렵다는 공통적인 한계점이 지적되었습니다.

## 🧠 Insights & Discussion

- **발전 단계의 유사성**: Deep EHR 연구는 이미지 처리 및 자연어 처리(NLP) 분야의 발전과 유사한 시간적 흐름을 보입니다. 현재는 방대한 원시 환자 데이터의 '표현 학습'에 집중하고 있으며, 의료 코드를 '단어', 환자를 '문장'으로 비유하여 NLP 기술을 활용하는 경향이 짙습니다.
- **데이터 이질성**: EHR 데이터는 임상 노트의 자유 텍스트, 이산적인 청구 코드, 인구통계학적 정보, 활력 징후 및 실험실 측정값의 연속 시계열 등 매우 이질적입니다. 이는 이미지(픽셀)나 NLP(문자) 데이터의 동질성과 대비되며, Deep EHR 연구의 고유하고 어려운 특징입니다. 현재는 각 데이터 유형을 분리하여 처리하는 '분할 정복' 방식이 주로 사용되고 있습니다.
- **미래 연구 방향**:
  - **직접적이고 통합된 데이터 처리**: 단순히 청구 목적으로 설계된 코드를 넘어, 실측값(예: 실험실 검사, 활력 징후)과 임상 자유 텍스트 등 다양한 유형의 환자 데이터를 직접 통합하여 활용하는 프레임워크 개발이 필요합니다.
  - **비정기적 측정값 처리**: 임상 시계열 데이터의 불규칙한 샘플링 간격을 수작업 전처리 없이 강건하게 처리할 수 있는 딥러닝 메커니즘이 요구됩니다.
  - **임상 텍스트 활용**: 아직 활용되지 않은 방대한 임상 자유 텍스트에서 지식을 추출하는 NLP 기반 딥러닝 연구의 잠재력이 큽니다.
  - **환자 개인 식별 정보 제거**: 병원 간 데이터 공유를 위한 자동화된 개인 식별 정보 제거(De-identification) 기술(예: RNN, Bi-LSTM) 발전은 필수적입니다.
  - **보편적 벤치마크**: 대부분의 연구가 사설 데이터셋을 사용하기 때문에 결과의 투명성과 재현성이 부족합니다. MIMIC과 같은 공개 데이터셋을 활용한 보편적인 벤치마크 확립이 시급합니다.
  - **모델 해석 가능성(Interpretability)**: 딥러닝 모델의 '블랙박스' 특성은 임상 의사 결정에 있어 큰 제약이 됩니다. 최대 활성화 분석, 제약 조건(비음수성, 희소성, 온톨로지 스무딩) 부여, 정성적 클러스터링(t-SNE), 모방 학습(mimic learning) 등 다양한 해석 가능성 향상 기법이 연구되고 있지만, 임상적 신뢰와 광범위한 채택을 위해서는 성능과 해석 가능성 간의 균형을 찾는 노력이 지속되어야 합니다. 특히 생명과 직결된 결정에는 모델의 예측을 이해하고 신뢰할 수 있는 능력이 매우 중요합니다.

## 📌 TL;DR

**문제**: EHR 데이터의 폭발적인 증가와 이질적인 특성에도 불구하고, 전통적인 머신러닝 기법은 복잡성 처리와 특징 공학에 한계가 있었습니다. 딥러닝이 잠재력을 보여주었으나, EHR 데이터에 특화된 딥러닝 기술의 현황을 체계적으로 파악하고, 주요 임상 애플리케이션에 대한 적용 방식, 성능, 그리고 모델 해석 가능성, 데이터 이질성, 보편적 벤치마크 부족 등 핵심적인 한계점과 미래 방향을 제시해야 했습니다.

**제안 방법**: 본 서베이 논문은 2017년 8월까지 출판된 Deep EHR 관련 연구들을 광범위하게 검토하여, 정보 추출, 표현 학습, 결과 예측, 표현형 분석, 개인 식별 정보 제거의 다섯 가지 주요 임상 애플리케이션으로 분류하고 각 분야에 적용된 딥러닝 아키텍처(MLP, CNN, RNN, AE, RBM 등)와 그 성과를 분석했습니다. 또한, 딥러닝 모델의 해석 가능성 확보를 위한 시도들을 검토하고, EHR 데이터의 독특한 이질성을 중심으로 현재 연구의 한계와 미래 기회를 논의했습니다.

**주요 결과**: 딥러닝은 임상 노트 정보 추출, 의료 개념/환자 표현 학습, 다양한 정적/시간적 결과 예측, 계산 표현형 분석, 개인 식별 정보 제거 등 EHR 기반 임상 작업 전반에서 전통적인 머신러닝 기법보다 우수한 성능을 입증했습니다. 특히, 딥러닝은 데이터로부터 자동으로 특징을 학습하여 수작업 특징 공학의 필요성을 줄였습니다. 그러나 모델의 '블랙박스' 특성으로 인한 낮은 해석 가능성, EHR 데이터의 복잡한 이질성, 연구 간 비교를 위한 보편적 벤치마크 부족은 여전히 중요한 해결 과제로 남아있습니다. 향후 연구는 통합된 환자 표현 학습, 비정기적 시계열 데이터 처리, 임상 텍스트의 활용 극대화, 개인 식별 정보 제거 기술 발전, 그리고 임상 의사 결정을 위한 모델 해석 가능성 증진에 집중해야 할 것입니다.
